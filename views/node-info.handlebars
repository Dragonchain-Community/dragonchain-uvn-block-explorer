<div class="row">
	<div class="col-sm-8">
		<h4>Public ID: {{chain_id}}</h4>
	</div>
	<div class="col-sm-4 text-right">
 		<div id="app-state"></div>
	</div>
</div>

<div class="bg-light p-3 border">
	<div class="row mb-2">
		<div class="col-sm-4">			
			<b>Node Level:</b><br/>
			{{chain_level}}			
		</div>	

		<div class="col-sm-4">			
			<b>Dragonchain Version:</b><br/>
			{{chain_version}}			
		</div>

		<div class="col-sm-4">
			<b>Block Height:</b><br/>
			{{block_height}}
		</div>
	</div>

	<div class="row">
		<div class="col-sm-4">
			<b>Blocks Last 24 Hours:</b><br/>
			{{blocks_last_24_hours}}
		</div>

		<div class="col-sm-4">
			<b>Last Block Time:</b><br/>
			{{last_block_time}} UTC ({{last_block_time_since}})
		</div>

		<div class="col-sm-4">
			<b>TIME @ Last Block:</b><br/>
			{{last_block_drgn_time}}
		</div>
	</div>
</div>

<div class="row">
	<div class="col-sm-6">
		<div id="chart_day_div"></div>
	</div>
	<div class="col-sm-6">
		<div id="chart_week_div"></div>
	</div>
</div>

<div class="row">
	<div class="col-sm-12">
		<p><b>Last Block:</b></p>
		<pre class="bg-light border p-2"><code>{{{jsonPretty last_block}}}</code></pre>
	</div>
</div>

<script>
	var blocksByHour = {{{json blocks_by_hour}}};
	var blocksByDay = {{{json blocks_by_day}}};

	console.log({{{json new_blocks}}})

	google.charts.load('current', {packages: ['corechart', 'bar']});
	google.charts.setOnLoadCallback(drawCharts);

	function drawCharts() {
		drawChartDay();
		drawChartWeek();
	}

	function drawChartDay() {

		// Create the data table.
		var data = new google.visualization.DataTable();
		data.addColumn('string', 'Hour');
		data.addColumn('number', 'Blocks');

		for (var i = blocksByHour.length - 1; i >= 0; i--)
		{
			var element = blocksByHour[i];
			data.addRow([element.hour, element.times.length]);
		}


		// Set chart options
		var options = {'title':'Blocks by Hour (24 Hours)', 'width':'100%', 'height':500};

		// Instantiate and draw our chart, passing in some options.
		var chart = new google.visualization.ColumnChart(document.getElementById('chart_day_div'));
		chart.draw(data, options);
	}

	function drawChartWeek() {

		// Create the data table.
		var data = new google.visualization.DataTable();
		data.addColumn('string', 'Day');
		data.addColumn('number', 'Blocks');

		for (var i = blocksByDay.length - 1; i >= 0; i--)
		{
			var element = blocksByDay[i];
			data.addRow([element.day, element.blocks]);
		}


		// Set chart options
		var options = {'title':'Blocks by Day (7 Days)', 'width':'100%', 'height':500};

		// Instantiate and draw our chart, passing in some options.
		var chart = new google.visualization.ColumnChart(document.getElementById('chart_week_div'));
		chart.draw(data, options);
	}
</script>

